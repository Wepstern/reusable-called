name: resusable-workflow-called

on:
  # Allows you to run this workflow manually from the Actions tab
  workflow_dispatch:
  # Allows you to run this workflow as a reusable workflow from another workflow
  workflow_call:
    inputs:
      username:
        required: true
        type: string
      workflows-ref:
        description: "ref of the centralized workflows repo that was specified in 'jobs.<name>.uses'"
        required: true
        type: string
    secrets:
      token:
        required: true

jobs:
  example_job:
    runs-on: ubuntu-latest
    uses: actions/checkout@v2
      with:
        ref: ${{ inputs.workflows-ref }}
        path: workflows
        repository: Wepstern/reusable-called/.github/workflows/reusable-workflow-caller.yaml@main
        token: ${{ secrets.GH_ACCESSTOKEN }}
    steps:
      - name: checkout repo content
        uses: actions/checkout@v2 # checkout the repository content to github runner.
      - name: setup python
        uses: actions/setup-python@v2
        with:
          python-version: 3.8 #install the python needed
      - name: execute py script # run the run.py to get the latest data
        run: |
          python app/run.py
